---
title: "┣ ステージングとcommit(コミット)"
free: false
---

Sourcetreeに戻ってみましょう。
コミットアイコンにバッジ（変更したファイルの数）が表示されます。
左ペインの「ファイルステータス」を選択しましょう。
以下の画像の通り変更したファイルと変更箇所が表示されているはずです。（表示されない場合は、左上のプルダウンが「保留中のファイルを表示」になっていない可能性がありますので設定してください）

![](/images/books/497459787cb294/practice_03.png)

この変更したファイルをcommit(コミット)します。  
分散型バージョン管理システムにおけるコミットとは、自身のPCに作成した【ローカル】リポジトリに変更内容等を保存する事を指します。

## ステージング

このままではまだコミット出来ないので、「**ステージング**」を行います。
ステージングとはコミットしたいファイルを指定する作業を指します。これにより誤って修正途中やコミットしたくないファイルをコミットするのを防ぐことが出来ます。  
ファイル右の「＋」ボタンや「〜インデックスに追加」ボタンでファイルをステージングすると、「Indexにステージしたファイル」に該当ファイルが表示されます。

![](/images/books/497459787cb294/practice_04.png)

### ステージングはなぜ必要？

集中型バージョン管理システムでは【ローカル】リポジトリが無いので、コミットはすなわち中央リポジトリへの保存を指します。そして、ステージングという作業はありません。
なぜGitではステージングがあるのでしょうか？

ステージングが無いということはコミットする際にコミットしたいファイルを全て列挙する必要があるということです。
GUIで作業する場合は特に不便を感じることはありませんが、CUI(コマンドライン)で作業する場合は面倒なことになりますし誤コミットを行ってしまうリスクがあります。
分散型というよりGitがCUIで作業する事を前提に開発されている点でもステージングがあると便利だったりします。
また、ファイルの一部の変更だけをステージング（その後コミット）するという芸当ができるのもGitのステージングがあればこそです。

内部的には、Gitの仕組み上必要な作業を行っています。
リポジトリにはファイルはそのままでは保存されず圧縮や差分化した上で規則に則ったファイル名で保存する必要があります。
ステージングでその事前準備を行っています。

Gitの内部でどのような事が行われているかきになる方は以下のサイトを参照ください。
https://git-scm.com/book/ja/v2/Git%E3%81%AE%E5%86%85%E5%81%B4-%E9%85%8D%E7%AE%A1%EF%BC%88Plumbing%EF%BC%89%E3%81%A8%E7%A3%81%E5%99%A8%EF%BC%88Porcelain%EF%BC%89

## コミット

最後に画面下のコミットコメント欄を入力して「コミット」を押下します。初回コミット時に以下の様なユーザ情報ダイアログが表示されることがあります。フルネームはGitLabに登録したユーザ名に変更してください。(その後もう一度「コミット」を押下してください。)

![](/images/books/497459787cb294/practice_05.png)
![](/images/books/497459787cb294/practice_06.png)
